<h1>Elastic search for books</h1>

<%= form_for :search_books, url: search_books_path, method: :get do |form| %>
    <%= form.text_field :query, value: params[:search_books].presence && params[:search_books][:query] %>
    <%= form.submit 'Search' %>
<% end %>

<% unless @books.nil? %>
    <% if @books.empty? %>
        <h2>No books found matching your query.</h2>
    <% else %>
        <h2>Search results</h2>

        <table style="width: 100%;">
            <thead>
                <tr>
                    <th>Author</th>
                    <th>Title</th>
                    <th>Category</th>
                    <th>Quantity</th>
                    <th>Number in Lib</th>
                </tr>
            </thead>

            <tbody>
                <% @books.each do |book| %>
                    <tr>
                        <td><%= book.author %></td>
                        <td><%= book.title %></td>
                        <td><%= book.category %></td>
                        <td><%= book.quantity %></td>
                        <td><%= link_to 'View', book_path(book.id) %></td>
                    </tr>
                <% end %>
                <tbody>
        </table>
    <% end %>
<% end %>
